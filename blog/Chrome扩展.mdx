---
title: 记录最近做的两个浏览器（Chrome内核）扩展
---

import HarDemo from './HAR';
import Chat from './Chat';
import Write from "./Write";
import Gpt from "./GPT";

### 扩展一： HAR Debugger 一个可以帮助开发者快速定位客户网络或者产品问题的工具插件

产品内部自测通过，交付用户后在用户的电脑💻上奔溃了，客户投诉产品垃圾怎么办？

#### 什么是HAR包？

定义：HTTP存档格式（HTTP Archive format，简称HAR）是一种JSON格式的存档文件格式，多用于记录网页浏览器与网站的交互过程。文件扩展名通常为.har

“HAR格式的规范定义了一个HTTP事务的存档格式，可用于网页浏览器导出加载网页时的详细性能数据  ”									——Wikipedia

如下所示：通过改扩展可以帮住你方便地记录客户电脑上一段时间发生的网络时间，通过生成的HAR包文件，方便在自己本地电脑复现！🥸（好吧，我承认这场景有点无聊🥱）
<HarDemo></HarDemo>

#### 后记

关于这个HAR扩展其实一开始我是打算纯手工拼接的方式👋 把这个har给攒出来的，头铁试了一段时间发现 **臣妾做不到啊～～😭**

里面涉及到的字段很多，具体可以查看这个链接🔗： http://www.softwareishard.com/blog/har-12-spec/

而且这些字段都来自页面加载过程中的不同事件，且不少有依赖关系，我粗略统计了一下至少需要监听以下这些事件👇
```js
[
'Page.loadEventFired',
'Page.domContentEventFired',
'Page.frameStartedLoading',
'Page.frameAttached',
'Network.requestWillBeSent',
'Network.requestServedFromCache',
'Network.dataReceived',
'Network.responseReceived',
'Network.resourceChangedPriority',
'Network.loadingFinished',
'Network.loadingFailed',
...
]
```
有些数据的组织过程需要跨事件来攒，虽然说每个请求都有一个requestId来串起来，但是其中的**拼接规则** 我还是拿不准😭

于是就放弃了纯手工攒数据的方向，开始求助社区，果然在*npm.org*里被我发现了这个👉：[Chrome-har](https://www.npmjs.com/package/chrome-har)

看该package的简介：

    “Create HAR files based on Chrome DevTools Protocol data.

    Code originally extracted from Browsertime,

    initial implementation inspired by Chromedriver_har.”

简介中的第一句话正是我要的，后面提到了另一个工具 **Browsertime** 我去看了下，很强大不过我用不到～，感兴趣的小伙伴可以去了解一下 [Browsertime](https://github.com/sitespeedio/browsertime)



### 扩展二：AI智能助手 + 网页划词

这个东西最近可是太火🔥了，各种AI助手...满天飞，自己也做了一个，效果如下：


##### 聊天写作✏️能力

<Chat></Chat>


##### 网页划词翻译能力

<Write></Write>

##### 改版UI加入历史对话

<Gpt></Gpt>



