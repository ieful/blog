---
slug: defineProperty
title: vue2åŸç†
---


### æ±‚ä»¥ä¸‹ä»£ç çš„æ‰“å°è¾“å‡º


```js
var option = {
    data: {
        a: 1
    }
}

class Component {
    constructor(opt) {
        this.data = opt.data;
        Object.defineProperty(this.data, 'a', {
            get: function () {
                console.log('get val');
                return this._a;
            },
            set: function (newValue) {
                console.log('set val' + newValue);
                this._a = newValue;
            }
        })
    }
}

var c1 = new Component(option);
var c2 = new Component(option);

c1.data.a = 3;
c2.data.a = 5;

console.log('c1:' + c1.data.a);
console.log('c2:' + c2.data.a);
```


```js
// é¢˜è§£ï¼šè¿™é“é¢˜æ²¡ä»€ä¹ˆéš¾çš„ï¼Œåªè¦çŸ¥é“ Vue2 ä¸­çš„ Object.defineProperty å†åŠ ä¸€ç‚¹ ç»†å¿ƒ å°±èƒ½åšå¯¹

// å®šä¹‰äº†ä¸€ä¸ªå…¨å±€çš„ option å¯¹è±¡
var option = {
    // è¿˜ä¸“é—¨æŠŠ data è®¾ç½®ä¸ºä¸€ä¸ª å¯¹è±¡ï¼Œå¹¶ä¸”åŒ…åœ¨ option ä¸­å¤Ÿä¸å¤Ÿ "å¿ƒæœº"  è¯»åˆ°è¿™å„¿æˆ‘éƒ½èƒ½çŒœåˆ°å®ƒåé¢çš„å‘é•¿å•¥æ ·äº†ğŸ‘“ï¼
    data: {
        a: 1
    }
}


class Component {
    constructor(opt) {
        // é‡ç‚¹æ¥äº†ï¼Œåœ¨constructor ä¸­ç›´æ¥æŠŠ opt.data èµ‹å€¼ç»™äº† this.data, è€Œopt.data æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼ï¼è®°ä½åé¢è¦è€ƒï¼
        this.data = opt.data;
        Object.defineProperty(this.data, 'a', {
            get: function () {
                console.log('get val'); // æ™®é€šçš„ getter è®°å½•æ“ä½œï¼Œè¿”å›å€¼
                return this._a;
            },
            set: function (newValue) {
                console.log('set val' + newValue); // æ™®é€šçš„ setter è®°å½•æ“ä½œï¼Œè®¾ç½®å€¼
                this._a = newValue;
            }
        })
    }
}

// é™·é˜±å¼€å§‹äº†ï¼Œæ„é€ å‡½æ•°æ„é€ äº†ä¸¤ä¸ªå®ä¾‹ï¼š c1 å’Œ c2  é€šè¿‡ğŸ‘†ä¸Šé¢å¯¹æ„é€ å‡½æ•°çš„åˆ†ææˆ‘ä»¬çŸ¥é“
// ä¼šç›´æ¥æŠŠä¼ å¦‚çš„ option çš„ data èµ‹å€¼ç»™ å®ä¾‹ çš„ dataï¼Œ è€Œdata æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥ä¼ é€’çš„æ˜¯ åŒä¸€å—å†…å­˜ï¼ï¼
var c1 = new Component(option);
var c2 = new Component(option);
// æ‰€ä»¥è¿™ä¸¤å¥ä»£ç æ‰§è¡Œå®Œåï¼Œc1 å’Œ c2 éƒ½æœ‰è‡ªå·±çš„ data ä½†æ˜¯å…¶æŒ‡å‘æ˜¯åŒä¸€å—å†…å­˜ï¼

// c1 å¼€å§‹æ“ä½œè‡ªå·±çš„dataäº†ï¼Œèµ‹å€¼ 3 ï¼Œæ‰“å°ï¼š set valï¼š 3
c1.data.a = 3;
// c2 å¼€å§‹æ“ä½œè‡ªå·±çš„dataäº†ï¼Œ èµ‹å€¼ 5ï¼Œ æ‰“å°ï¼šset val: 5  ç”±äºäºŒè€…æŒ‡å‘çš„data å…¶å®æ˜¯åŒä¸€å—å†…å­˜ï¼Œæ‰€ä»¥å…¶å®c2æ”¹å†™äº† c1 èµ‹çš„å€¼
c2.data.a = 5;


console.log('c1:' + c1.data.a); // c1 è¯»å–data.a ,è‚¯å®šæ˜¯5å•Šï¼Œä»¥ä¸º ä½ çš„ 3 å·²ç»è¢« c2 ç»™æ”¹æˆ 5 äº†ï¼ æ‰“å°ï¼šget val  c1: 5
console.log('c2:' + c2.data.a); // æ‰“å°ï¼šget val  c2: 5


// ç­”æ¡ˆï¼š
// set val 3
// set val 5
// get val
// c1:5
// get val
// c2:5
```