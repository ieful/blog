---
slug: Renderondemand
title: Echarå›¾è¡¨ğŸ“ˆæŒ‰éœ€æ¸²æŸ“,åŠåº•å›¾è®¾ç½®
---
import axjz from '/static/video/axjz.mp4';
import empty from '/static/img/emptyChart.png';

çœ‹è¿™æ ·ä¸€ä¸ªæ•ˆæœï¼š
<video src={axjz} width={700} controls/>

è¿™æ˜¯ç”¨åœ¨Reactä¸­ä½¿ç”¨Echarsåšçš„ä¸€ä¸ªæ ¹æ®ç”¨æˆ·çš„æ»‘åŠ¨ "æŒ‰éœ€æ¸²æŸ“" çš„é¡µé¢æ•ˆæœ
å½“å›¾è¡¨æ— æ•°æ®æ—¶æ•ˆæœå¦‚ä¸‹ğŸ‘‡ï¼Œå¯¹äºæ¯ç§ç±»å‹çš„å›¾è¡¨ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„åº•å›¾æ˜¾ç¤ºåœ¨å›¾è¡¨çš„ä½ç½®ã€‚

<img src={empty} width={700} alt="empty" />


å…¶ä¸­ç”¨åˆ°äº† *IntersectionObserver* çš„å¯¹è±¡å¯è§è§‚æµ‹APIï¼Œå¯¹å›¾è¡¨æ˜¯å¦è¿›å…¥å¯è§†åŒºè¿›è¡Œäº†è§‚æµ‹




```js
// è‡ªå®šä¹‰hooks æŠ½ç¦»å„å›¾è¡¨å…¬å…±çš„æ—¶é—´é€‰æ‹©æ§ä»¶é€»è¾‘
export const useDateRange = () => {
    const [timeRange, setTimeRange] = useState([moment().subtract(7, 'day'), moment()]);
    const statUnitOptions: StatUnitOptions = useMemo(() => {
        let intervalDays = moment(timeRange[1]).diff(moment(timeRange[0]), 'days'); // é—´éš”å¤©æ•°
        if (intervalDays === 0) {
            return {
                toggleUnits: [{label: 'æ—¶', value: 'hour'}],
                activeUnit: {label: 'æ—¶', value: 'hour'}
            }
        } else if (intervalDays > 0 && intervalDays <= 6) {
            return {
                toggleUnits: [{label: 'æ—¥', value: 'day'}],
                activeUnit: {label: 'æ—¥', value: 'day'}
            }
        } else if (intervalDays > 6 && intervalDays <= 35) {
            return {
                toggleUnits: [{ label: 'æ—¥', value: 'day' }, { label: 'å‘¨', value: 'week' }],
                activeUnit: { label: 'æ—¥', value: 'day' }
            }
        } else {
            return {
                toggleUnits: [{ label: 'å‘¨', value: 'week' }, { label: 'æœˆ', value: 'month' }],
                activeUnit: { label: 'å‘¨', value: 'week' }
            }
        }
    }, [timeRange]);
    const [currentUnit, setCurrentUnit] = useState<StatType>(statUnitOptions.activeUnit.value);

    useEffect(() => {
        setCurrentUnit(statUnitOptions.activeUnit.value);
    }, [statUnitOptions]);
    return {timeRange, setTimeRange, statUnitOptions, currentUnit, setCurrentUnit}
}
````


```js
// Echartè®¾ç½®åº•å›¾çš„æ–¹æ³•
const emptyOption = (typeImg: any) => {
    return {
        title: {
            text: ' {a|}',
            subtext: 'æš‚æ— æ•°æ®',
            x: 'center',
            y: 'center',
            itemGap: -55,
            textStyle: {
                rich: {
                    a: {
                        width: 200,
                        height: 150,
                        backgroundColor: {
                            image: typeImg,
                        }
                    },
                }
            },
            subtextStyle: {
                fontSize: 12,
                color: '#525966'
            }
        }
    }
}
```




