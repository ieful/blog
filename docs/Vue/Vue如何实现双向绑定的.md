---
title: Vue如何实现双向绑定的？
---

Vue 实现双向绑定的核心是通过数据劫持（Object.defineProperty）和发布-订阅模式。

具体步骤如下：

##### 数据劫持： 

Vue 会对组件的 data 属性进行递归遍历，使用 Object.defineProperty 将每个属性转化为 getter 和 setter，从而在获取和设置数据时实现对数据的劫持。

##### 发布-订阅模式： 

Vue 使用发布-订阅模式来实现数据更新的通知。每个数据属性都有一个对应的订阅者列表，当数据发生变化时，会遍历订阅者列表，通知所有订阅者进行更新。

##### Watcher： 

在 Vue 中，Watcher 负责订阅数据的变化。当组件的模板中使用了数据属性时，会创建一个对应的 Watcher 对象，将其添加到属性的订阅者列表中。Watcher 对象会在数据发生变化时接收通知，然后触发视图更新。

##### 模板编译： 

Vue 的编译过程会将模板解析成抽象语法树（AST），然后通过遍历 AST 生成渲染函数。在生成渲染函数的过程中，会为模板中的每个数据属性创建对应的 Watcher 对象。

##### 用户事件绑定： 

Vue 还通过 v-model 等指令提供了用户直接绑定数据属性和 DOM 元素的语法糖，从而实现了双向绑定。

总的来说，Vue 的双向绑定是通过数据劫持和发布-订阅模式实现的。这种机制使得数据和视图之间能够自动同步，当数据变化时，视图会自动更新；反之，当用户与视图交互时，数据也会自动更新。这大大简化了开发者对数据流的管理。